<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<title>Transaction Form</title>
<style>
  /* Add your CSS styles here */
</style>
<script>
  function sendData() {
    console.log("trying to send api")
    const URL = 'http://np-ws-feed-alb-1782231454.eu-west-2.elb.amazonaws.com/api/v1/account';
    const amount = parseFloat(document.getElementById("amount").value);
    var transactionType = document.querySelector('input[name="transactionType"]:checked').value;
    
    var apiEndpoint = '';
    if (transactionType === 'deposit') {
      apiEndpoint = URL + '/deposit';
    } else if (transactionType === 'withdraw') {
      apiEndpoint = URL + '/withdraw';
    }
    
    var userId = new URLSearchParams(window.location.search).get('id')
    console.log(userId)

    // Call API
    fetch(apiEndpoint, {
      method: 'POST',
      body: JSON.stringify({ amount: amount, uId: userId}),
      headers: {
        'Content-Type': 'application/json'
      }
    })
    .then(response => response.json())
    .then(data => {
      console.log('API response:', data);
      // Handle response as needed
    })
    .catch(error => {
      console.error('Error calling API:', error);
      // Handle error as needed
    });
  }
</script>
</head>
<body>
  <h1>Transaction Form</h1>
  <form>
    <label><input type="radio" name="transactionType" value="deposit"> Deposit</label>
    <label><input type="radio" name="transactionType" value="withdraw"> Withdraw</label><br><br>
  
    <label for="amount">Amount:</label>
    <input type="number" id="amount" name="amount"><br><br>
  
    <button type="button" onclick="sendData()">Submit</button>
  </form>
</body>
</html>
